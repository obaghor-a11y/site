// Sample luxury products (customize this array with real items)
const products = [
    { id: 1, name: 'Rolex Submariner Watch', price: 9500.00, image: 'https://via.placeholder.com/280x250/000000/FFD700?text=Rolex+Watch' },
    { id: 2, name: 'Cartier Diamond Necklace', price: 12500.00, image: 'https://via.placeholder.com/280x250/000000/FFD700?text=Diamond+Necklace' },
    { id: 3, name: 'Omega Speedmaster', price: 6800.00, image: 'https://via.placeholder.com/280x250/000000/FFD700?text=Omega+Watch' },
    { id: 4, name: 'Tiffany Sapphire Ring', price: 8900.00, image: 'https://via.placeholder.com/280x250/000000/FFD700?text=Sapphire+Ring' }
];

// Cart management
let cart = JSON.parse(localStorage.getItem('cart')) || [];

// Function to render products
function renderProducts() {
    const productList = document.getElementById('product-list');
    productList.innerHTML = products.map(product => `
        <div class="product">
            <img src="${product.image}" alt="${product.name}">
            <h3>${product.name}</h3>
            <p>$${product.price.toFixed(2)}</p>
            <button class="add-to-cart" onclick="addToCart(${product.id})">Add to Cart</button>
        </div>
    `).join('');
}

// Function to add to cart
function addToCart(productId) {
    const product = products.find(p => p.id === productId);
    const existingItem = cart.find(item => item.id === productId);
    
    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({ ...product, quantity: 1 });
    }
    
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCount();
    alert(`${product.name} added to your exclusive selection!`);
}

// Function to render cart
function renderCart() {
    const cartItems = document.getElementById('cart-items');
    const cartTotal = document.getElementById('cart-total');
    
    if (cart.length === 0) {
        cartItems.innerHTML = '<p style="text-align: center; opacity: 0.7;">Your selection is empty.</p>';
        cartTotal.textContent = '0';
        return;
    }
    
    cartItems.innerHTML = cart.map(item => `
        <div class="cart-item">
            <span>${item.name} (x${item.quantity}) - $${(item.price * item.quantity).toFixed(2)}</span>
            <button class="remove-item" onclick="removeFromCart(${item.id})">Remove</button>
        </div>
    `).join('');
    
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    cartTotal.textContent = total.toFixed(2);
}

// Function to remove from cart
function removeFromCart(productId) {
    cart = cart.filter(item => item.id !== productId);
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
    updateCartCount();
}

// Function to update cart count in nav
function updateCartCount() {
    const count = cart.reduce((sum, item) => sum + item.quantity, 0);
    document.getElementById('cart-count').textContent = count;
}

// Navigation and cart toggle
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target.id === 'cart') {
            target.style.display = target.style.display === 'none' ? 'block' : 'none';
            if (target.style.display === 'block') {
                renderCart();
            }
        } else {
            target.scrollIntoView({ behavior: 'smooth' });
        }
    });
});

// Checkout simulation
document.getElementById('checkout-btn').addEventListener('click', function() {
    if (cart.length === 0) {
        alert('Your selection is empty!');
        return;
    }
    alert('Purchase confirmed! (Simulation only. For real luxury transactions, integrate secure payments like Stripe.) Thank you for choosing Elite Luxuries.');
    cart = [];
    localStorage.removeItem('cart');
    renderCart();
    updateCartCount();
    document.getElementById('cart').style.display = 'none';
});

// Clear cart
document.getElementById('clear-cart-btn').addEventListener('click', function() {
    cart = [];
    localStorage.removeItem('cart');
    renderCart();
    updateCartCount();
});

// Initialize
renderProducts();
updateCartCount();
